(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,t,a){e.exports=a(449)},183:function(e,t,a){},187:function(e,t,a){},382:function(e,t,a){},423:function(e,t,a){},425:function(e,t,a){},427:function(e,t,a){},429:function(e,t,a){},431:function(e,t,a){},449:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(56),s=a.n(i),o=(a(183),a(11)),l=a.n(o),c=a(21),u=a(32),m=a(29),d=a(34),h=a(33),p=a(35),f=a(87),g=a(170),b=a(459),E=a(457),v=a(458),w=a(169),y=(a(187),a(14)),O=a.n(y),S=a(422),x=a(452),k=a(453),C=a(49),L=a(172),j=a.n(L),A=a(39),I=a(451),N=a(416),T=(a(382),function(e){var t=e.isLoading,a=e.text,n=e.loadingText,i=e.className,s=void 0===i?"":i,o=e.disabled,l=void 0!==o&&o,c=Object(A.a)(e,["isLoading","text","loadingText","className","disabled"]);return r.a.createElement(I.a,Object.assign({className:"LoaderButton ".concat(s),disabled:l||t},c),t&&r.a.createElement(N.a,{glyph:"refresh",className:"spinning"}),t?n:a)}),D=a(26),P=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={isLoading:!0,files:[],attachmentURL:null},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"formatFilename",value:function(e){return e.replace(/^\w+-/,"")}},{key:"renderNotesList",value:function(e){var t=this;return[{}].concat(e).map(function(e,a){return 0!==a?r.a.createElement("div",{class:"main"},r.a.createElement(S.a,null,r.a.createElement(D.Grid,{fluid:!0},r.a.createElement(D.Row,null,r.a.createElement(D.Col,{xs:12,sm:8,md:6,lg:6},t.formatFilename(e.filename)),r.a.createElement(D.Col,{xs:6,sm:4,md:4,lg:2},new Date(e.createdAt).toLocaleString()),r.a.createElement(D.Col,{xs:3,sm:2,md:2,lg:2},r.a.createElement("form",{onSubmit:t.handleDownload.bind(t,e)},r.a.createElement(T,{inline:!0,bsStyle:"primary",bsSize:"small",disabled:!1,type:"submit",isLoading:t.state.isLoading,text:"Download",loadingText:"Downloading\u2026"}))),r.a.createElement(D.Col,{xs:3,sm:2,md:2,lg:2},r.a.createElement("form",{onSubmit:t.handleDelete.bind(t,e)},r.a.createElement(T,{inline:!0,bsStyle:"danger",bsSize:"small",disabled:!1,type:"submit",isLoading:t.state.isLoading,text:"Delete",loadingText:"Deleting\u2026"}))))))):r.a.createElement("div",null,r.a.createElement(C.LinkContainer,{key:"new",to:"/upload/new"},r.a.createElement(S.a,null,r.a.createElement("h4",null,r.a.createElement("b",null,"\uff0b")," Upload New File"))),r.a.createElement(S.a,null,r.a.createElement(D.Grid,{fluid:!0},r.a.createElement(D.Row,null,r.a.createElement(D.Col,{xs:12,sm:8,md:6,lg:6},r.a.createElement("h4",null,"Name")),r.a.createElement(D.Col,{xs:6,sm:4,md:4,lg:2},r.a.createElement("h4",null,"Created On")),r.a.createElement(D.Col,{xs:3,sm:2,md:2,lg:2}),r.a.createElement(D.Col,{xs:3,sm:2,md:2,lg:2})))))})}},{key:"deleteNote",value:function(e){return y.API.del("files","/file/".concat(e.fileId))}},{key:"handleDelete",value:function(){var e=Object(c.a)(l.a.mark(function e(t,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),window.confirm("Are you sure you want to delete this note?")){e.next=4;break}return e.abrupt("return");case 4:return this.setState({isDeleting:!0}),e.prev=5,e.next=8,this.deleteNote(t);case 8:return e.next=10,y.Storage.vault.remove(t.filename);case 10:window.location.reload(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),alert(e.t0),this.setState({isDeleting:!1});case 17:case"end":return e.stop()}},e,this,[[5,13]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleDownload",value:function(e,t){t.preventDefault(),console.log(e),j()({url:e.attachmentURL,method:"GET",responseType:"blob"}).then(function(t){var a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",e.filename),document.body.appendChild(n),n.click()})}}]),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.files();case 5:t=e.sent,a=0;case 7:if(!(a<t.length)){e.next=14;break}return e.next=10,y.Storage.vault.get(t[a].filename);case 10:t[a].attachmentURL=e.sent;case 11:a++,e.next=7;break;case 14:this.setState({files:t}),console.log(t),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),alert(e.t0);case 21:this.setState({isLoading:!1});case 22:case"end":return e.stop()}},e,this,[[2,18]])}));return function(){return e.apply(this,arguments)}}()},{key:"files",value:function(){return y.API.get("files","/files")}},{key:"renderLander",value:function(){return r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"ShareBox"),r.a.createElement("p",null,"A simple storage application"),r.a.createElement("div",null,r.a.createElement(f.a,{to:"/login",className:"btn btn-info btn-lg"},"Login"),r.a.createElement(f.a,{to:"/signup",className:"btn btn-success btn-lg"},"Signup")))}},{key:"renderFiles",value:function(){return r.a.createElement("div",{className:"files"},r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"ShareBox"),r.a.createElement("p",null,"A simple storage application")),r.a.createElement(x.a,null,"Your Files"),r.a.createElement(k.a,null,!this.state.isLoading&&this.renderNotesList(this.state.files)))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},this.props.isAuthenticated?this.renderFiles():this.renderLander())}}]),t}(n.Component),F=(a(423),function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}),_=a(43),U=a(454),R=a(455),z=a(460),G=(a(425),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(c.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,y.Auth.signIn(a.state.email,a.state.password);case 5:a.props.userHasAuthenticated(!0),a.props.history.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.message),a.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,email:"",password:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(U.a,{controlId:"email",bsSize:"large"},r.a.createElement(R.a,null,"Email"),r.a.createElement(z.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(U.a,{controlId:"password",bsSize:"large"},r.a.createElement(R.a,null,"Password"),r.a.createElement(z.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(T,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Login",loadingText:"Logging in\u2026"})))}}]),t}(n.Component)),H=a(88),B=function(e){var t=e.component,a=e.props,n=Object(A.a)(e,["component","props"]);return r.a.createElement(H.a,Object.assign({},n,{render:function(e){return r.a.createElement(t,Object.assign({},e,a))}}))},M=a(456),Y=(a(427),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(c.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,y.Auth.signUp({username:a.state.email,password:a.state.password});case 5:n=e.sent,a.setState({newUser:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.message);case 12:a.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmationSubmit=function(){var e=Object(c.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,y.Auth.confirmSignUp(a.state.email,a.state.confirmationCode);case 5:return e.next=7,y.Auth.signIn(a.state.email,a.state.password);case 7:a.props.userHasAuthenticated(!0),a.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0.message),a.setState({isLoading:!1});case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,email:"",password:"",confirmPassword:"",confirmationCode:"",newUser:null},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"validateConfirmationForm",value:function(){return this.state.confirmationCode.length>0}},{key:"renderConfirmationForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleConfirmationSubmit},r.a.createElement(U.a,{controlId:"confirmationCode",bsSize:"large"},r.a.createElement(R.a,null,"Confirmation Code"),r.a.createElement(z.a,{autoFocus:!0,type:"tel",value:this.state.confirmationCode,onChange:this.handleChange}),r.a.createElement(M.a,null,"Please check your email for the code.")),r.a.createElement(T,{block:!0,bsSize:"large",disabled:!this.validateConfirmationForm(),type:"submit",isLoading:this.state.isLoading,text:"Verify",loadingText:"Verifying\u2026"}))}},{key:"renderForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(U.a,{controlId:"email",bsSize:"large"},r.a.createElement(R.a,null,"Email"),r.a.createElement(z.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(U.a,{controlId:"password",bsSize:"large"},r.a.createElement(R.a,null,"Password"),r.a.createElement(z.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(U.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(R.a,null,"Confirm Password"),r.a.createElement(z.a,{value:this.state.confirmPassword,onChange:this.handleChange,type:"password"})),r.a.createElement(T,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Signup",loadingText:"Signing up\u2026"}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Signup"},null===this.state.newUser?this.renderForm():this.renderConfirmationForm())}}]),t}(n.Component)),W={MAX_ATTACHMENT_SIZE:5e6,s3:{REGION:"ap-south-1",BUCKET:"sharebox-files-bucket"},apiGateway:{REGION:"ap-south-1",URL:"https://ylizg2zq65.execute-api.ap-south-1.amazonaws.com/prod"},cognito:{REGION:"ap-south-1",USER_POOL_ID:"ap-south-1_htyoykdtT",APP_CLIENT_ID:"6fc31nohsrojqrn6is314p93kd",IDENTITY_POOL_ID:"ap-south-1:f0894763-0008-44c3-a9b5-36caa789caa4"}};a(429);function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(c.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t.name),e.next=3,y.Storage.vault.put(a,t,{contentType:t.type});case 3:return n=e.sent,e.abrupt("return",n.key);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleFileChange=function(e){a.file=e.target.files[0],a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(c.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.file&&a.file.size>W.MAX_ATTACHMENT_SIZE)){e.next=4;break}return alert("Please pick a file smaller than ".concat(W.MAX_ATTACHMENT_SIZE/1e6," MB.")),e.abrupt("return");case 4:if(a.setState({isLoading:!0}),e.prev=5,!a.file){e.next=12;break}return e.next=9,X(a.file);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:return n=e.t0,e.next=16,a.createNote({filename:n});case 16:a.props.history.push("/"),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(5),alert(e.t1),a.setState({isLoading:!1});case 23:case"end":return e.stop()}},e,this,[[5,19]])}));return function(t){return e.apply(this,arguments)}}(),a.file=null,a.state={isLoading:null,content:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"validateForm",value:function(){return this.file}},{key:"createNote",value:function(e){return y.API.post("files","/files",{body:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"NewNote"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(U.a,{controlId:"file"},r.a.createElement(R.a,null,"Upload File"),r.a.createElement(z.a,{onChange:this.handleFileChange,type:"file"})),r.a.createElement(T,{block:!0,bsStyle:"primary",bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Create",loadingText:"Creating\u2026"})))}}]),t}(n.Component),J=a(168),K=function(e){var t=e.component,a=e.props,n=Object(A.a)(e,["component","props"]);return r.a.createElement(H.a,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(J.a,{to:"/login?redirect=".concat(e.location.pathname).concat(e.location.search)})}}))},V=function(e){var t=e.component,a=e.props,n=Object(A.a)(e,["component","props"]);return r.a.createElement(H.a,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(J.a,{to:"/"}):r.a.createElement(t,Object.assign({},e,a))}}))},$=function(e){var t=e.childProps;return r.a.createElement(w.a,null,r.a.createElement(B,{path:"/",exact:!0,component:P,props:t}),r.a.createElement(V,{path:"/login",exact:!0,component:G,props:t}),r.a.createElement(V,{path:"/signup",exact:!0,component:Y,props:t}),r.a.createElement(K,{path:"/upload/new",exact:!0,component:q,props:t}),r.a.createElement(B,{component:F}))},Q=(a(431),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).userHasAuthenticated=function(e){a.setState({isAuthenticated:e})},a.handleLogout=function(){var e=Object(c.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Auth.signOut();case 2:a.userHasAuthenticated(!1),a.props.history.push("/login");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={isAuthenticated:!1,isAuthenticating:!0},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Auth.currentSession();case 3:this.userHasAuthenticated(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 9:this.setState({isAuthenticating:!1});case 10:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,userHasAuthenticated:this.userHasAuthenticated};return!this.state.isAuthenticating&&r.a.createElement("div",{className:"App container"},r.a.createElement(b.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(b.a.Header,null,r.a.createElement(b.a.Brand,null,r.a.createElement(f.a,{to:"/"},"ShareBox")),r.a.createElement(b.a.Toggle,null)),r.a.createElement(b.a.Collapse,null,r.a.createElement(E.a,{pullRight:!0},this.state.isAuthenticated?r.a.createElement(n.Fragment,null,r.a.createElement(C.LinkContainer,{to:"/upload/new"},r.a.createElement(v.a,null,"Upload")),r.a.createElement(v.a,{onClick:this.handleLogout},"Logout")):r.a.createElement(n.Fragment,null,r.a.createElement(C.LinkContainer,{to:"/signup"},r.a.createElement(v.a,null,"Signup")),r.a.createElement(C.LinkContainer,{to:"/login"},r.a.createElement(v.a,null,"Login")))))),r.a.createElement($,{childProps:e}))}}]),t}(n.Component)),ee=Object(g.a)(Q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=a(147);O.a.configure({Auth:{mandatorySignIn:!0,region:W.cognito.REGION,userPoolId:W.cognito.USER_POOL_ID,identityPoolId:W.cognito.IDENTITY_POOL_ID,userPoolWebClientId:W.cognito.APP_CLIENT_ID},Storage:{region:W.s3.REGION,bucket:W.s3.BUCKET,identityPoolId:W.cognito.IDENTITY_POOL_ID},API:{endpoints:[{name:"files",endpoint:W.apiGateway.URL,region:W.apiGateway.REGION}]}}),s.a.render(r.a.createElement(te.a,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t){}},[[178,2,1]]]);
//# sourceMappingURL=main.87988098.chunk.js.map